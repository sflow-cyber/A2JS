<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>Cart | Artmart</title>
  <script type="module">

    import { CartItem } from './cart-item.js';
    import * as Cart from './cart.js';

    // test with two items:
    if (Cart.getAmount < 1) {
      Cart.add(new CartItem(11111, 'M', "elegant", 26, "wine", 67));
      Cart.add(new CartItem(11129, 'L', "natural", 30, "indigo", 86));
    }
    // end of test

    Cart.drawAllItems();

    document.addEventListener('DOMContentLoaded', event => {
      updateLocalStorage();
    });

    const deleteButton = document.querySelector('.cart-item .museum-label .cart-remove');
    deleteButton.addEventListener('click', event => {
      //Cart.add(new CartItem(1,1,1,1,1,1));
      //Cart.getItems();
      Cart.remove(0);
      updateLocalStorage();
    })

    const checkoutButton = document.getElementById('checkout-button');
    checkoutButton.addEventListener('click', event => {
      window.location.href = "./checkout.html";
    })

    function updateLocalStorage() {
      const cart = document.getElementById('cart-link');
      cart.innerText = "Cart" + Cart.getAmountAsString();

      if (Cart.getAmount() == 0) {
        document.querySelector('#cart div').innerText = "There are no items in your shopping cart.";
        document.getElementById('checkout-button').disabled = true;
      }
    }

   
  </script>
</head>

<body>
  <header>
    <a href="search.html">
      <img src="artmart_logo.png" alt="Artmart" class="logo">
    </a>
    <nav>
      <a href="search.html">Search</a>
      <a href="cart.html" id="cart-link">Cart</a>
    </nav>
  </header>

  <main>
    <section class="cart" id="cart">
      <div class="cart-total">
        <div class="price">Total: â‚¬ <span id="price-total">0</span></div>
        <button type="button" id="checkout-button">Checkout</button>
      </div>
    </section>
  </main>

</body>

</html>
